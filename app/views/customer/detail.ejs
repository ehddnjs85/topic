<div class="container">
    <div class="mt-5 mb-5">
        <h1 class="mb-5">Detail</h1>
        <form action="/customers/<%= data.id %>" method="post" class="form-horizontal" role="form">
            <div class="form-group">
                <label for="recipient-name" class="col-form-label">email:</label>
                <input type="hidden" id="userId" value="<%= data.id %>">
                <input type="email" name="email" class="form-control" id="email" value="<%= data.email %>">
            </div>
            <div class="form-group">
                <label for="message-text" class="col-form-label">name:</label>
                <input type="text" name="name" class="form-control" id="name" value="<%= data.name %>">
            </div>
            <div class="form-group">
                <label for="recipient-name" class="col-form-label">active:</label>
                <input type="text" name="active" class="form-control" id="active" value="<%= data.active %>">
            </div>
            <div class="form-group">
                <div class="mt-3 mb-3">
                    <div class="text-right">
                        <button type="button" onclick="location.href='/'" class="btn btn-primary">Back</button>
                        <button type="submit" class="btn btn-primary" id="save">Save</button>
                        <button type="button" class="btn btn-primary" id="edit">Edit</button>
                    </div>
                </div>
            </div>
        </form>
    </div> 
</div>

<script>

let userId = $('#userId').val();

// 버튼 숨기기
if (userId) {
    $("#save").hide();
} else {
    $("#edit").hide();
    $("#delete").hide();
}

// Update
$('#edit').on('click', function () {
    let email = $('#email').val();
    let name = $('#name').val();
    let active = $('#active').val();

    
    $.ajax({
        url : "/customers/" + userId,
        type : "PUT",
        data : { email, name, active},
        success: function (result) {
            location.href = "/";
        }
    });

    // $.post("/edit/" + userId, { title : t, description : d, author : a}, function (result) {
    //     location.href = "/";
    // });
});

</script>