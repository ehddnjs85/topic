<div class="container">
    <div class="mt-5 mb-5">
        <h1 class="mb-5">No-Restful</h1>
        <form action="/add" method="POST" class="form-horizontal" role="form">
            <div class="form-group">
                <label for="">Title</label>
                <input type="hidden" id="userId" value="<%= rows.id %>">
                <input type="text" name="title" class="form-control" id="title" value="<%= rows.title %>">
            </div>
            <div class="form-group">
                <label for="">Description</label>
                <textarea name="description" class="form-control" id="description" rows="3"><%= rows.description %></textarea>
            </div>
            <div class="form-group">
                <label for="">Author</label>
                <input type="text" name="author" class="form-control" id="author" value="<%= rows.author %>">
            </div>
            <div class="form-group">
                <div class="mt-3 mb-3">
                    <div class="text-right">
                        <button type="button" onclick="location.href='/'" class="btn btn-primary">Back</button>
                        <button type="submit" class="btn btn-primary" id="save">Save</button>
                        <button type="button" class="btn btn-primary" id="edit">Edit</button>
                    </div>
                </div>
            </div>
        </form>
    </div> 
</div>

<script>

let userId = $('#userId').val();

// 버튼 숨기기
if (userId) {
    $("#save").hide();
} else {
    $("#edit").hide();
    $("#delete").hide();
}

// Update
$('#edit').on('click', function () {
    let t = $('#title').val();
    let d = $('#description').val();
    let a = $('#author').val();
    
    $.post("/edit/" + userId, { title : t, description : d, author : a}, function (result) {
        location.href = "/";
    });
});

</script>